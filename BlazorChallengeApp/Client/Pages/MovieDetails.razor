@page "/MovieDetails/{movieId}"
@using System.Text.Json
@using BlazorChallengeApp.Shared
@using System.Net.Http.Json
@using Newtonsoft.Json
@inject HttpClient Http
@inject Microsoft.AspNetCore.Components.NavigationManager navigationManager
<h3>MovieDetails</h3>

@code {
    [Parameter]
    public string movieId { get; set; }
    private Movie movie;

    /// <summary>
    /// Get Movie details on Initialized.
    /// </summary>
    protected override async Task OnInitializedAsync()
    {
        movie = await GetMovieDetails(movieId);
    }

    private async Task<Movie> GetMovieDetails(string movieId)
    {
        return await Http.GetFromJsonAsync<Movie>("Movie/Details?id="+movieId);
    }
}
